<?xml version = '1.0' encoding = 'UTF-8'?>
<!--Generated by Oracle SOA Modeler version 1.0 at [2/13/13 10:03 AM].-->
<Mediator name="ProjectMediator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.oracle.com/sca/1.0/mediator"
          wsdlTargetNamespace="http://xmlns.bayer.com/ipms/p6">
  <operation name="close" deliveryPolicy="AllOrNothing" priority="4"
             validateSchema="false">
    <switch>
      <case executionType="direct"
            name="ProjectCloseService.ProjectCloseService">
        <action>
          <assign>
            <copy target="$out.ProjectCloseServiceInput_msg/ProjectCloseServiceInput/pk_id"
                  expression="$in.payload/ns1:close/ns1:id"
                  xmlns:ns1="http://xmlns.bayer.com/ipms/p6"/>
            <copy target="$out.ProjectCloseServiceInput_msg/ProjectCloseServiceInput/proj_id"
                  expression="$in.payload/ns1:close/ns1:id"
                  xmlns:ns1="http://xmlns.bayer.com/ipms/p6"/>
          </assign>
          <invoke reference="ProjectCloseService"
                  operation="ProjectCloseService"/>
        </action>
      </case>
    </switch>
  </operation>
  
  <operation name="readWBS" deliveryPolicy="AllOrNothing" priority="4" validateSchema="false">
    <switch>
      <case executionType="sequential" name="WBSReadService.WBSReadService">
        <action>
          <assign>
            <copy expression="$in.payload/client:ReadWBS/client:ObjectId"
                  target="$out.WBSReadServiceInput_msg/db:WBSReadServiceInput/db:object_id"
                  xmlns:client="http://xmlns.bayer.com/ipms/p6"
                  xmlns:db="http://xmlns.oracle.com/pcbpel/adapter/db/WBSReadService"/>
          </assign>
          <invoke reference="WBSReadService" operation="WBSReadService">
            <onReply>
              <assign>
                <copy expression="$in.WBSReadServiceOutputCollection/db:WBSReadServiceOutputCollection/db:WBSReadServiceOutput/db:wbs_object_id"
                      target="$out.payload/client:WBS/client:ObjectId" xmlns:client="http://xmlns.bayer.com/ipms/p6"
                      xmlns:db="http://xmlns.oracle.com/pcbpel/adapter/db/WBSReadService"/>
                <copy expression="$in.WBSReadServiceOutputCollection/db:WBSReadServiceOutputCollection/db:WBSReadServiceOutput/db:wbs_category_object_id"
                      target="$out.payload/client:WBS/client:WBSCategoryObjectId"
                      xmlns:client="http://xmlns.bayer.com/ipms/p6"
                      xmlns:db="http://xmlns.oracle.com/pcbpel/adapter/db/WBSReadService"/>
                <copy expression="$in.WBSReadServiceOutputCollection/db:WBSReadServiceOutputCollection/db:WBSReadServiceOutput/db:wbs_category_name"
                      target="$out.payload/client:WBS/client:WBSCategoryName"
                      xmlns:client="http://xmlns.bayer.com/ipms/p6"
                      xmlns:db="http://xmlns.oracle.com/pcbpel/adapter/db/WBSReadService"/>
              </assign>
              <reply/>
            </onReply>
          </invoke>
        </action>
      </case>

    </switch>
  </operation>
  
  <operation name="updateTask" deliveryPolicy="AllOrNothing" priority="4"
             validateSchema="false">
    <switch>
      <case executionType="sequential" name="updateTask.updateTask">
        <action>
          <assign>
            <copy expression="$in.payload/client:updateTask/client:createUser"
                  target="$out.updateTaskInput_msg/db:updateTaskInput/db:p_create_user"
                  xmlns:db="http://xmlns.oracle.com/pcbpel/adapter/db/updateTask"
                  xmlns:client="http://xmlns.bayer.com/ipms/p6"/>
            <copy expression="$in.payload/client:updateTask/client:taskId"
                  target="$out.updateTaskInput_msg/db:updateTaskInput/db:p_task_id"
                  xmlns:db="http://xmlns.oracle.com/pcbpel/adapter/db/updateTask"
                  xmlns:client="http://xmlns.bayer.com/ipms/p6"/>
          </assign>
          <invoke reference="updateTask" operation="updateTask"/>
        </action>
      </case>
    </switch>
  </operation>

</Mediator>
