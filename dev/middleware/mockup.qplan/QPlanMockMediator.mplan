<?xml version = '1.0' encoding = 'UTF-8'?>
<!--Generated by Oracle SOA Modeler version 11.1.1.7.0 at [9/9/14 10:45 AM].-->
<Mediator name="QPlanMockMediator" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" wsdlTargetNamespace="https://quickplan-p.bayer-ag.com/services" xmlns="http://xmlns.oracle.com/sca/1.0/mediator" xmlns:qplan="https://quickplan-p.bayer-ag.com/services">
   <operation name="CreateProject" deliveryPolicy="AllOrNothing" priority="4"
              validateSchema="true">
      <switch>
         <case executionType="direct" name="echo.CreateProject_3">
            <condition language="xpath">
               <expression>contains($in.parameters/qplan:CreateProject/qplan:createProjectRequest/qplan:projectId, '5')</expression>
            </condition>
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:CreateProjectResponse/qplan:CreateProjectResult/qplan:ok"
                        value="false"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:CreateProjectResponse/qplan:CreateProjectResult/qplan:msgCode"
                        value="502"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:CreateProjectResponse/qplan:CreateProjectResult/qplan:message"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"
                        expression='concat("Project with ProjectId ", $in.parameters/tns:CreateProject/tns:createProjectRequest/tns:projectId, " already exists")'
                        xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
         <case executionType="direct" name="echo.CreateProject"
               defaultRule="true">
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:CreateProjectResponse/qplan:CreateProjectResult/qplan:ok"
                        value="true"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:CreateProjectResponse/qplan:CreateProjectResult/qplan:msgCode"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"
                        value="100"/>
                  <copy target="$out.parameters/qplan:CreateProjectResponse/qplan:CreateProjectResult/qplan:message" expression='concat("Project ",  $in.parameters/qplan:CreateProject/qplan:createProjectRequest/qplan:projectId, " created. "
    , count($in.parameters/qplan:CreateProject/qplan:createProjectRequest/qplan:keyData/qplan:keyDataAttribute), " key data attributes; "
    , count($in.parameters/qplan:CreateProject/qplan:createProjectRequest/qplan:milestoneData/qplan:*) - 1, " milestones"
)' xmlns:qplan="https://quickplan-p.bayer-ag.com/services"
                        xmlns:oraext="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc"/>
               </assign>
               <echo/>
            </action>
         </case>
      </switch>
   </operation>
   <operation name="UpdateDecisionMilestones" deliveryPolicy="AllOrNothing" priority="4"
              validateSchema="true">
      <switch>
         <case executionType="direct" name="echo.UpdateDecisionMilestones">
            <condition language="xpath">
               <expression>$in.parameters/qplan:UpdateDecisionMilestones/qplan:updateDecisionMilestonesRequest/qplan:projectId = "221-1964"</expression>
            </condition>
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:UpdateDecisionMilestonesResponse/qplan:UpdateDecisionMilestonesResult/qplan:ok"
                        value="false"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdateDecisionMilestonesResponse/qplan:UpdateDecisionMilestonesResult/qplan:msgCode"
                        value="205"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdateDecisionMilestonesResponse/qplan:UpdateDecisionMilestonesResult/qplan:message"
                        value="Project not found"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
         <case executionType="direct" name="echo.UpdateDecisionMilestones_2"
               defaultRule="true">
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:UpdateDecisionMilestonesResponse/qplan:UpdateDecisionMilestonesResult/qplan:ok"
                        value="true"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdateDecisionMilestonesResponse/qplan:UpdateDecisionMilestonesResult/qplan:msgCode"
                        value="111"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdateDecisionMilestonesResponse/qplan:UpdateDecisionMilestonesResult/qplan:message"
                        value="Decision Milestones updated"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
      </switch>
   </operation>
   <operation name="UpdateKeyData" deliveryPolicy="AllOrNothing" priority="4"
              validateSchema="true">
      <switch>
         <case executionType="direct" name="echo.UpdateKeyData">
            <condition language="xpath">
               <expression>$in.parameters/qplan:UpdateKeyData/qplan:updateKeyDataRequest/qplan:projectId = "221-1964"</expression>
            </condition>
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:UpdateKeyDataResponse/qplan:UpdateKeyDataResult/qplan:ok"
                        value="false"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdateKeyDataResponse/qplan:UpdateKeyDataResult/qplan:msgCode"
                        value="205"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdateKeyDataResponse/qplan:UpdateKeyDataResult/qplan:message"
                        value="Project not found"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
         <case executionType="direct" name="echo.UpdateKeyData_3">
            <condition language="xpath">
               <expression>count($in.parameters/qplan:UpdateKeyData/qplan:updateKeyDataRequest/qplan:keyData/qplan:keyDataAttribute[qplan:key='ProjectID'])</expression>
            </condition>
            <action>
               <assign>
                  <copy target="$out.parameters/tns:UpdateKeyDataResponse/tns:UpdateKeyDataResult/tns:msgCode"
                        value="901"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/tns:UpdateKeyDataResponse/tns:UpdateKeyDataResult/tns:ok"
                        expression="false()"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/tns:UpdateKeyDataResponse/tns:UpdateKeyDataResult/tns:message"
                        value="Read only property"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
         <case executionType="direct" name="echo.UpdateKeyData_2"
               defaultRule="true">
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:UpdateKeyDataResponse/qplan:UpdateKeyDataResult/qplan:ok"
                        value="true"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdateKeyDataResponse/qplan:UpdateKeyDataResult/qplan:msgCode"
                        value="111"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdateKeyDataResponse/qplan:UpdateKeyDataResult/qplan:message"
                        value="Key Data updated"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
      </switch>
   </operation>
   <operation name="UpdatePtrValues" deliveryPolicy="AllOrNothing" priority="4"
              validateSchema="true">
      <switch>
         <case executionType="direct" name="echo.UpdatePtrValues">
            <condition language="xpath">
               <expression>$in.parameters/qplan:UpdatePtrValues/qplan:updatePTRValuesRequest/qplan:projectId = "221-1964"</expression>
            </condition>
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:UpdatePtrValuesResponse/qplan:UpdatePtrValuesResult/qplan:ok"
                        value="false"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdatePtrValuesResponse/qplan:UpdatePtrValuesResult/qplan:msgCode"
                        value="205"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdatePtrValuesResponse/qplan:UpdatePtrValuesResult/qplan:message"
                        value="Project not found"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
            
         </case>
         <case executionType="direct" name="echo.UpdatePtrValues"
               defaultRule="true">
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:UpdatePtrValuesResponse/qplan:UpdatePtrValuesResult/qplan:ok"
                        value="true"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdatePtrValuesResponse/qplan:UpdatePtrValuesResult/qplan:msgCode"
                        value="111"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:UpdatePtrValuesResponse/qplan:UpdatePtrValuesResult/qplan:message"
                        value="PTR values updated"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>      </switch>
   </operation>
   <operation name="GetStudyList" deliveryPolicy="AllOrNothing" priority="4"
              validateSchema="true">
      <switch>
         <case executionType="direct" name="echo.GetStudyList">
            <condition language="xpath">
               <expression>$in.parameters/qplan:GetStudyList/qplan:projectId = "221-1964"</expression>
            </condition>
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:GetStudyListResponse/qplan:GetStudyListResult/qplan:ok"
                        value="false"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:GetStudyListResponse/qplan:GetStudyListResult/qplan:msgCode"
                        value="200"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:GetStudyListResponse/qplan:GetStudyListResult/qplan:message"
                        value="Not found"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
         <case executionType="direct" name="echo.GetStudyList_2">
            <action>
               <transform>
                  <part name="$out.parameters"
                        function="xslt(xsl/GetStudyListResponse.xsl, $in.parameters)"/>
               </transform>
               <assign>
                  <copy target="$out.parameters/tns:GetStudyListResponse/tns:GetStudyListResult/tns:ok"
                        value="true"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/tns:GetStudyListResponse/tns:GetStudyListResult/tns:msgCode"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"
                        value="Studies for your project"/>
                  <copy target="$out.parameters/tns:GetStudyListResponse/tns:GetStudyListResult/tns:msgCode"
                        value="100"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
      </switch>
   </operation>
   <operation name="GetTimelineData" deliveryPolicy="AllOrNothing" priority="4"
              validateSchema="true">
      <switch>
         <case executionType="direct" name="echo.GetTimelineData">
            <condition language="xpath">
               <expression>$in.parameters/qplan:GetTimelineData/qplan:projectId = "221-1964" or $in.parameters/qplan:GetTimelineData/qplan:projectId = "MB0613-01"</expression>
            </condition>
            <action>
               <assign>
                  <copy target="$out.parameters/qplan:GetTimelineDataResponse/qplan:GetTimelineDataResult/qplan:ok"
                        value="false"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:GetTimelineDataResponse/qplan:GetTimelineDataResult/qplan:msgCode"
                        value="200"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/qplan:GetTimelineDataResponse/qplan:GetTimelineDataResult/qplan:message"
                        value="Not found"
                        xmlns:qplan="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
         <case executionType="direct" name="echo.GetTimelineData_2">
            <condition language="xpath">
               <expression>$in.parameters/qplan:GetTimelineData/qplan:projectId = '236830'</expression>
            </condition>
            <action>
               <transform>
                  <part name="$out.parameters"
                        function="xslt(xsl/GetTimelineDataResponse.236830.xsl, $in.parameters)"/>
               </transform>
               <assign>
                  <copy target="$out.parameters/tns:GetTimelineDataResponse/tns:GetTimelineDataResult/tns:ok"
                        value="true"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/tns:GetTimelineDataResponse/tns:GetTimelineDataResult/tns:msgCode"
                        value="161"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/tns:GetTimelineDataResponse/tns:GetTimelineDataResult/tns:message"
                        value="Timeline ok"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
         <case executionType="direct" name="echo.GetTimelineData_3"
               defaultRule="true">
            <action>
               <transform>
                  <part name="$out.parameters"
                        function="xslt(xsl/GetTimelineDataResponse.xsl, $in.parameters)"/>
               </transform>
               <assign>
                  <copy target="$out.parameters/tns:GetTimelineDataResponse/tns:GetTimelineDataResult/tns:ok"
                        value="true"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/tns:GetTimelineDataResponse/tns:GetTimelineDataResult/tns:msgCode"
                        value="161"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
                  <copy target="$out.parameters/tns:GetTimelineDataResponse/tns:GetTimelineDataResult/tns:message"
                        value="Timeline ok"
                        xmlns:tns="https://quickplan-p.bayer-ag.com/services"/>
               </assign>
               <echo/>
            </action>
         </case>
	</switch>
   </operation>
</Mediator>
