<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE ViewObject SYSTEM "jbo_03_01.dtd">
<!---->
<ViewObject
  xmlns="http://xmlns.oracle.com/bc4j"
  Name="LatestEstimatesTagView"
  Version="12.2.1.0.31"
  InheritPersonalization="merge"
  BindingStyle="OracleName"
  CustomQuery="true"
  RowClass="com.bayer.ipms.model.views.estimates.LatestEstimatesTagViewRowImpl"
  ComponentClass="com.bayer.ipms.model.views.estimates.LatestEstimatesTagViewImpl"
  PageIterMode="Full"
  FetchSize="100"
  FetchMode="FETCH_AS_NEEDED"
  RowInterface="com.bayer.ipms.model.views.estimates.common.LatestEstimatesTagViewRow"
  ClientRowProxyName="com.bayer.ipms.model.views.estimates.client.LatestEstimatesTagViewRowClient"
  ComponentInterface="com.bayer.ipms.model.views.estimates.common.LatestEstimatesTagView"
  ClientProxyName="com.bayer.ipms.model.views.estimates.client.LatestEstimatesTagViewClient">
  <DesignTime>
    <Attr Name="_codeGenFlag2" Value="Access|Coll|VarAccess"/>
    <Attr Name="_isCodegen" Value="true"/>
    <Attr Name="_isExpertMode" Value="true"/>
  </DesignTime>
  <Properties>
    <SchemaBasedProperties>
      <LABEL
        ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView_LABEL"/>
    </SchemaBasedProperties>
  </Properties>
  <Variable
    Name="TagId"
    Kind="viewcriteria"
    Type="java.lang.String"/>
  <ViewAccessor
    Name="PrefillTypeProbabilisticView"
    ViewObjectName="com.bayer.ipms.model.views.lookups.PrefillTypeView"
    AMUsageName="SharedAppModule"
    ViewInstanceName="PrefillTypeProbabilisticView"
    RowLevelBinds="true"/>
  <ViewAccessor
    Name="LatestEstimatesTagView"
    ViewObjectName="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView"
    RowLevelBinds="true"/>
  <ViewAccessor
    Name="EstimatesAppModule_PreviousTagLatestEstimatesProcessView"
    ViewObjectName="com.bayer.ipms.model.views.estimates.LatestEstimatesProcessView"
    AMUsageName="EstimatesAppModule"
    ViewInstanceName="PreviousTagLatestEstimatesProcessView"
    RowLevelBinds="true"/>
  <ViewAccessor
    Name="VO_LatestEstimatesProcessTagView"
    ViewObjectName="com.bayer.ipms.model.views.estimates.LatestEstimatesProcessView"
    RowLevelBinds="true"/>
  <ListBinding
    Name="LOV_CyProbPrefillTagId"
    ListVOName="LatestEstimatesTagView"
    ListRangeSize="-1"
    NullValueFlag="none"
    MRUCount="0">
    <AttrArray Name="AttrNames">
      <Item Value="CyProbPrefillTagId"/>
    </AttrArray>
    <AttrArray Name="AttrExpressions"/>
    <AttrArray Name="ListAttrNames">
      <Item Value="Id"/>
    </AttrArray>
    <AttrArray Name="ListDisplayAttrNames">
      <Item Value="Name"/>
    </AttrArray>
    <DisplayCriteria/>
  </ListBinding>
  <ListBinding
    Name="LOV_NyProbPrefillTagId"
    ListVOName="LatestEstimatesTagView"
    ListRangeSize="-1"
    NullValueFlag="none"
    MRUCount="0">
    <AttrArray Name="AttrNames">
      <Item Value="NyProbPrefillTagId"/>
    </AttrArray>
    <AttrArray Name="AttrExpressions"/>
    <AttrArray Name="ListAttrNames">
      <Item Value="Id"/>
    </AttrArray>
    <AttrArray Name="ListDisplayAttrNames">
      <Item Value="Name"/>
    </AttrArray>
    <DisplayCriteria/>
  </ListBinding>
  <ListBinding
    Name="LOV_OldProcessId"
    ListVOName="VO_LatestEstimatesProcessTagView"
    ListRangeSize="-1"
    NullValueFlag="start"
    MRUCount="0"
    NullValueId="${adfBundle['oracle.javatools.resourcebundle.SystemBundle']['NULL_VALUE_RESID']}">
    <AttrArray Name="AttrNames">
      <Item Value="OldProcessId"/>
    </AttrArray>
    <AttrArray Name="AttrExpressions"/>
    <AttrArray Name="ListAttrNames">
      <Item Value="Id"/>
    </AttrArray>
    <AttrArray Name="ListDisplayAttrNames">
      <Item Value="QualifiedName2"/>
    </AttrArray>
    <DisplayCriteria/>
  </ListBinding>
  <SQLQuery><![CDATA[SELECT ID,             
       NAME,             
       IS_FROZEN,             
       IS_MEETING_ALLOWED,             
       CREATE_DATE,             
       CREATE_USER_ID,             
       CY_PROB_PREFILL_CODE,             
       CY_PROB_PREFILL_TAG_ID,             
       NY_PROB_PREFILL_CODE,             
       NY_PROB_PREFILL_TAG_ID,             
       IS_FORECAST_PROB,             
       IS_PREFILL_PROB,             
       YEAR,             
       PREVIOUS_LET_ID,            
       START_DATA_COLLECTION,      
       OLD_PROCESS_ID,     
       PREV_PROCESS_NAME,    
       prev_tag_name    
 FROM (               
        with firstProcess as (           
        SELECT let_id, start_data_collection           
         FROM   (           
          SELECT lep.create_date as start_data_collection,           
                 lep.let_id,           
                 RANK( )over ( PARTITION BY lep.let_id ORDER BY lep.let_id,lep.Id ) AS rnk           
          FROM  LATEST_ESTIMATES_PROCESS lep           
        )           
        WHERE rnk = 1)           
        SELECT LatestEstimatesTag.ID,             
               LatestEstimatesTag.NAME,             
               LatestEstimatesTag.IS_FROZEN,             
               LatestEstimatesTag.IS_MEETING_ALLOWED,             
               LatestEstimatesTag.CREATE_DATE,             
               LatestEstimatesTag.CREATE_USER_ID,             
               LatestEstimatesTag.CY_PROB_PREFILL_CODE,             
               LatestEstimatesTag.CY_PROB_PREFILL_TAG_ID,             
               LatestEstimatesTag.NY_PROB_PREFILL_CODE,             
               LatestEstimatesTag.NY_PROB_PREFILL_TAG_ID,             
               LatestEstimatesTag.IS_FORECAST_PROB,             
               LatestEstimatesTag.IS_PREFILL_PROB,             
               LatestEstimatesTag.YEAR,             
               LatestEstimatesTag.previous_let_id AS PREVIOUS_LET_ID,        
	           fpr.start_data_collection,      
               LatestEstimatesTag.old_process_id,     
               LatestEstimatesProcess.Name as prev_process_name,   
               NVL2( LatestEstimatesTag.old_process_id, LatestEstimatesProcess.Name ||' / '||LatestEstimatesTagprev.Name, '' ) as prev_tag_name    
        FROM  LATEST_ESTIMATES_TAG LatestEstimatesTag            
        left join firstProcess fpr on fpr.LET_ID = LatestEstimatesTag.ID     
        left join LATEST_ESTIMATES_PROCESS LatestEstimatesProcess on LatestEstimatesProcess.id = LatestEstimatesTag.old_process_id    
        left join LATEST_ESTIMATES_TAG LatestEstimatesTagprev on LatestEstimatesTagprev.id = LatestEstimatesProcess.let_id)         
order by create_date desc]]></SQLQuery>
  <EntityUsage
    Name="LatestEstimatesTag"
    Entity="com.bayer.ipms.model.entities.estimates.LatestEstimatesTag"/>
  <ViewAttribute
    Name="Id"
    PrecisionRule="true"
    EntityAttrName="Id"
    EntityUsage="LatestEstimatesTag"
    AliasName="ID"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="Name"
    IsUnique="true"
    IsNotNull="true"
    PrecisionRule="true"
    EntityAttrName="Name"
    EntityUsage="LatestEstimatesTag"
    AliasName="NAME"/>
  <ViewAttribute
    Name="IsFrozen"
    PrecisionRule="true"
    EntityAttrName="IsFrozen"
    EntityUsage="LatestEstimatesTag"
    AliasName="IS_FROZEN">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.IsFrozen_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="IsMeetingAllowed"
    PrecisionRule="true"
    EntityAttrName="IsMeetingAllowed"
    EntityUsage="LatestEstimatesTag"
    AliasName="IS_MEETING_ALLOWED"/>
  <ViewAttribute
    Name="CreateDate"
    PrecisionRule="true"
    EntityAttrName="CreateDate"
    EntityUsage="LatestEstimatesTag"
    AliasName="CREATE_DATE"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="CreateUserId"
    PrecisionRule="true"
    EntityAttrName="CreateUserId"
    EntityUsage="LatestEstimatesTag"
    AliasName="CREATE_USER_ID"
    IsUpdateable="false"/>
  <ViewAttribute
    Name="CyProbPrefillCode"
    PrecisionRule="true"
    EntityAttrName="CyProbPrefillCode"
    EntityUsage="LatestEstimatesTag"
    AliasName="CY_PROB_PREFILL_CODE">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.CyProbPrefillCode_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="CyProbPrefillTagId"
    PrecisionRule="true"
    EntityAttrName="CyProbPrefillTagId"
    EntityUsage="LatestEstimatesTag"
    AliasName="CY_PROB_PREFILL_TAG_ID"
    LOVName="LOV_CyProbPrefillTagId">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.CyProbPrefillTagId_LABEL"/>
        <CONTROLTYPE
          Value="choice"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="NyProbPrefillCode"
    PrecisionRule="true"
    EntityAttrName="NyProbPrefillCode"
    EntityUsage="LatestEstimatesTag"
    AliasName="NY_PROB_PREFILL_CODE">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.NyProbPrefillCode_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="NyProbPrefillTagId"
    PrecisionRule="true"
    EntityAttrName="NyProbPrefillTagId"
    EntityUsage="LatestEstimatesTag"
    AliasName="NY_PROB_PREFILL_TAG_ID"
    LOVName="LOV_NyProbPrefillTagId">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.NyProbPrefillTagId_LABEL"/>
        <CONTROLTYPE
          Value="choice"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="IsForecastProb"
    IsNotNull="true"
    PrecisionRule="true"
    EntityAttrName="IsForecastProb"
    EntityUsage="LatestEstimatesTag"
    AliasName="IS_FORECAST_PROB">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.IsForecastProb_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="IsPrefillProb"
    IsNotNull="true"
    PrecisionRule="true"
    EntityAttrName="IsPrefillProb"
    EntityUsage="LatestEstimatesTag"
    AliasName="IS_PREFILL_PROB">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.IsPrefillProb_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="Year"
    PrecisionRule="true"
    EntityAttrName="Year"
    EntityUsage="LatestEstimatesTag"
    AliasName="YEAR"/>
  <ViewAttribute
    Name="PreviousLetId"
    PrecisionRule="true"
    AliasName="PREVIOUS_LET_ID"
    EntityAttrName="PreviousLetId"
    EntityUsage="LatestEstimatesTag"/>
  <ViewAttribute
    Name="StartDataCollection"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.sql.Date"
    ColumnType="DATE"
    AliasName="START_DATA_COLLECTION"
    Expression="START_DATA_COLLECTION"
    SQLType="DATE">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.StartDataCollection_LABEL"/>
        <FMT_FORMAT
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.StartDataCollection_FMT_FORMAT"/>
        <FMT_FORMATTER
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.StartDataCollection_FMT_FORMATTER"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="OldProcessId"
    PrecisionRule="true"
    EntityAttrName="OldProcessId"
    EntityUsage="LatestEstimatesTag"
    AliasName="OLD_PROCESS_ID"
    LOVName="LOV_OldProcessId">
    <TransientExpression
      Name="ExpressionScript"
      trustMode="untrusted"
      CodeSourceName="LatestEstimatesTagViewRow"/>
    <RecalcCondition
      Name="RecalcExpressionScript"
      trustMode="untrusted"
      CodeSourceName="LatestEstimatesTagViewRow"/>
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.OldProcessId_LABEL"/>
        <CONTROLTYPE
          Value="choice"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="PrevProcessName"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="NVARCHAR2"
    AliasName="PREV_PROCESS_NAME"
    Expression="PREV_PROCESS_NAME"
    SQLType="VARCHAR">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.PrevProcessName_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="PrevTagName"
    IsUpdateable="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="NVARCHAR2"
    AliasName="PREV_TAG_NAME"
    Expression="PREV_TAG_NAME"
    SQLType="VARCHAR">
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.PrevTagName_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewAttribute
    Name="QualifiedName"
    IsSelected="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR">
    <TransientExpression
      Name="ExpressionScript"><![CDATA[IsFrozen?Name+" (Frozen)":Name]]></TransientExpression>
    <RecalcCondition
      Name="RecalcExpressionScript"><![CDATA[true]]></RecalcCondition>
    <Dependencies>
      <Item
        Value="IsFrozen"/>
      <Item
        Value="Name"/>
    </Dependencies>
  </ViewAttribute>
  <ViewAttribute
    Name="QualifiedName2"
    IsUpdateable="false"
    IsSelected="false"
    IsPersistent="false"
    PrecisionRule="true"
    Type="java.lang.String"
    ColumnType="CHAR"
    AliasName="VIEW_ATTR"
    SQLType="VARCHAR">
    <TransientExpression
      Name="ExpressionScript"
      trustMode="untrusted"
      CodeSourceName="LatestEstimatesTagViewRow"/>
    <RecalcCondition
      Name="RecalcExpressionScript"
      trustMode="untrusted"
      CodeSourceName="LatestEstimatesTagViewRow"/>
    <Properties>
      <SchemaBasedProperties>
        <LABEL
          ResId="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.QualifiedName2_LABEL"/>
      </SchemaBasedProperties>
    </Properties>
  </ViewAttribute>
  <ViewCriteria
    Name="ById"
    ViewObjectName="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView"
    Conjunction="AND">
    <Properties Name="_Props">
      <CustomProperties>
        <Property
          Name="displayOperators"
          Value="InAdvancedMode"/>
        <Property
          Name="autoExecute"
          Value="false"/>
        <Property
          Name="allowConjunctionOverride"
          Value="true"/>
        <Property
          Name="showInList"
          Value="true"/>
        <Property
          Name="mode"
          Value="Basic"/>
      </CustomProperties>
    </Properties>
    <ViewCriteriaRow
      Name="LatestEstimatesTagViewCriteria_row_0"
      UpperColumns="1">
      <ViewCriteriaItem
        Name="Id"
        ViewAttribute="Id"
        Operator="="
        Conjunction="AND"
        Value=":TagId"
        IsBindVarValue="true"
        Required="Optional"/>
    </ViewCriteriaRow>
  </ViewCriteria>
  <AttrArray Name="KeyAttributes">
    <Item Value="Id"/>
  </AttrArray>
  <ViewLinkAccessor
    Name="LatestEstimatesProcessView"
    ViewLink="com.bayer.ipms.model.views.links.LepLet"
    Type="oracle.jbo.RowIterator"
    Reversed="true"
    IsUpdateable="false"/>
  <ClientInterface
    Name="__clientInterface">
    <Method
      Name="getRowById"
      MethodName="getRowById">
      <Return
        Name="_return_type_"
        Type="com.bayer.ipms.model.views.estimates.common.LatestEstimatesTagViewRow"/>
      <Parameter
        Name="id"
        Type="java.lang.String"/>
    </Method>
  </ClientInterface>
  <ClientRowInterface
    Name="__rowClientInterface">
    <Method
      Name="doMeetingAllowedRecalc"
      MethodName="doMeetingAllowedRecalc">
      <Return
        Name="_return_type_"
        Type="void"/>
    </Method>
    <Method
      Name="refresh"
      MethodName="refresh">
      <Return
        Name="_return_type_"
        Type="void"/>
    </Method>
    <Method
      Name="getLatestEstimatesProcessView"
      MethodName="getLatestEstimatesProcessView">
      <Return
        Name="_return_type_"
        Type="oracle.jbo.RowIterator"/>
    </Method>
  </ClientRowInterface>
  <ResourceBundle>
    <PropertiesBundle
      PropertiesFile="com.bayer.ipms.model.bundles.modelBundle"/>
  </ResourceBundle>
  <RowFinders>
    <AttrValueRowFinder
      Name="RowById">
      <ViewCriteriaUsage
        Name="ById"
        FullName="com.bayer.ipms.model.views.estimates.LatestEstimatesTagView.ById"/>
      <VarAttributeMap
        Name="RowByIdMap">
        <VariableAttributeMapping
          Variable="TagId"
          Attribute="Id"
          Name="TagId"/>
      </VarAttributeMap>
    </AttrValueRowFinder>
  </RowFinders>
</ViewObject>
